<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Create Decent App 2.0 Design Thoughts - Decent Apps</title><meta name="description" content="I've got some developers interested in writing apps for the Decent Portal. And it occurred to me there is one important thing for me to fix in the create-decent-app (CDA) project generator to avoid annoying them. If you're not familiar with vendoring, it's when your&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="./create-decent-app-20-design-thoughts.html"><link rel="shortcut icon" href="./media/website/decentLogo16.png" type="image/png"><link rel="preload" href="./assets/dynamic/fonts/instrumentsans/instrumentsans.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="./assets/dynamic/fonts/instrumentsans/instrumentsans-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="./assets/dynamic/fonts/jellee/jellee.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="./assets/css/style.css?v=dae9d45edfbd0d6454b7815fc9d71a2e"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"./create-decent-app-20-design-thoughts.html"},"headline":"Create Decent App 2.0 Design Thoughts","datePublished":"2025-04-05T15:46-07:00","dateModified":"2025-04-05T15:48-07:00","image":{"@type":"ImageObject","url":"./media/posts/15/create-decent-app-2-3.jpg","height":821,"width":2719},"description":"I've got some developers interested in writing apps for the Decent Portal. And it occurred to me there is one important thing for me to fix in the create-decent-app (CDA) project generator to avoid annoying them. If you're not familiar with vendoring, it's when your&hellip;","author":{"@type":"Person","name":"Erik Hermansen","url":"./authors/erik-hermansen/"},"publisher":{"@type":"Organization","name":"Erik Hermansen","logo":{"@type":"ImageObject","url":"./media/website/decentLogo192.png","height":192,"width":192}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><header class="top js-header" style="background-color:#a58c75"><a class="logo" href="./"><img src="./media/website/decentLogo192.png" alt="Decent Apps" width="192" height="192"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Decent Portal</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="./decent-portal-coming-soon.html" target="_self">General Information</a></li><li><a href="./hone-a-local-llm-spreadsheet-tool-built-on-decent.html" target="_self">Hone (a Decent app)</a></li></ul></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Developer Resources</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="./decent-portal-app-requirements.html" target="_self">Decent Portal App Requirements</a></li><li><a href="./partner-deployment-guide.html" target="_self">Partner Deployment Guide</a></li><li><a href="./create-decent-app-quick-start.html" target="_self">Create-Decent-App Quick Start</a></li><li><a href="https://github.com/DecentAppsNet/create-decent-app" target="_blank">Create-Decent-App Github Repo</a></li><li><a href="https://discord.gg/kkp3x4X2Vb" target="_blank">Decent Apps Discord</a></li></ul></li><li><a href="./tags/blog/" target="_self">Blog</a></li><li><a href="./contact-us.html" target="_self">Contact Us</a></li></ul></nav></header><main class="post"><article class="content"><div class="hero"><header class="hero__content"><div class="wrapper"><h1>Create Decent App 2.0 Design Thoughts</h1><div class="feed__meta content__meta"><a href="./authors/erik-hermansen/" class="feed__author">Erik Hermansen</a> <time datetime="2025-04-05T15:46" class="feed__date">April 5, 2025</time></div></div></header><figure class="hero__image"><div class="hero__image-wrapper"><img src="./media/posts/15/create-decent-app-2-3.jpg" srcset="./media/posts/15/responsive/create-decent-app-2-3-xs.jpg 640w, ./media/posts/15/responsive/create-decent-app-2-3-sm.jpg 768w, ./media/posts/15/responsive/create-decent-app-2-3-md.jpg 1024w, ./media/posts/15/responsive/create-decent-app-2-3-lg.jpg 1366w, ./media/posts/15/responsive/create-decent-app-2-3-xl.jpg 1600w, ./media/posts/15/responsive/create-decent-app-2-3-2xl.jpg 1920w" sizes="88vw" loading="eager" height="821" width="2719" alt=""></div><figcaption>Diagram depicting code and dependencies within Decent 1.1 vs 2.0.</figcaption></figure></div><div class="entry-wrapper content__entry"><p>I've got some developers interested in writing apps for the <a href="./decent-portal-coming-soon.html">Decent Portal.</a> And it occurred to me there is one important thing for me to fix in the <a href="./create-decent-app-quick-start.html">create-decent-app</a> (CDA) project generator to avoid annoying them.</p><h1>Vendoring vs Package Imports</h1><p>If you're not familiar with <a href="https://medium.com/plain-and-simple/dependency-vendoring-dd765be75655?" target="_blank" rel="noopener noreferrer">vendoring</a>, it's when your project directly includes source rather than importing it via a package manager. I'm a big fan of vendoring, though no purist about using it 100% of the time. I decided to directly include source from other libraries of mine within the project code generated by CDA.</p><p>This fits the spirit of decent apps, which are meant to be highly transparent and easily understandable by their own developers. So instead of CDA apps importing React components from my not-well-known-at-all widget library (<a href="https://github.com/erikh2000/sl-react-ui" target="_blank" rel="noopener noreferrer">Github repo</a>), the CDA template just includes some minimal source copied from that library for a handful of widgets.</p><p><strong>For Node developers, another way of explaining vendoring:</strong> instead of having source for a library live under <code>/node_modules/</code>, just copy the source from those projects under <code>/src/</code> or maybe <code>/src/vendor/</code>. And directly update the source as needed rather than rely on npm, yarn, or other package manager.</p><p>So in CDA 1.1, I have a very small number of dependencies - React, Wouter, and the mighty WebLLM (<a href="https://webllm.mlc.ai/" target="_blank" rel="noopener noreferrer">project site</a>). Everything else is vendored. After you generate a project with CDA, you can easily remove and modify code. You can use Tailwind instead of my off-brand widgets and CSS. You can delete the stuff from my LLM API about maintaining chat history if your app doesn't need it. You can revise my persistent storage API to use session storage instead of IndexedDb. You can yank out all the PWA functionality in 15 minutes.</p><p>I don't like frameworks, black boxes, needless complexity, or lock-ins. I wrote my CDA-generated code to be hacked, ignored, or thrown away. Vendoring is good for that.</p><p>But the vendoring approach breaks down in one notable way...</p><h1>Decent-Portal-Specific Code</h1><p>There is a widget I call the "Decent Bar" which is meant to show at the top of any app that appears on the decent portal. It provides some portal-specific functionality, navigation, and consistent branding.</p><figure class="post__image post__image--wide"><img loading="lazy" src="./media/posts/15/decentBar-2.jpg" alt="the Decent Bar" width="1836" height="294" sizes="(max-width: 1920px) 100vw, 1920px" srcset="./media/posts/15/responsive/decentBar-2-xs.jpg 640w, ./media/posts/15/responsive/decentBar-2-sm.jpg 768w, ./media/posts/15/responsive/decentBar-2-md.jpg 1024w, ./media/posts/15/responsive/decentBar-2-lg.jpg 1366w, ./media/posts/15/responsive/decentBar-2-xl.jpg 1600w, ./media/posts/15/responsive/decentBar-2-2xl.jpg 1920w"></figure><p>What if I need to update the Decent Bar widget to fix a bug? I don't want to ask all developers with apps on the Decent Portal to make specific source code changes. They shouldn't have to do anything besides update a version# in their <code>package.json</code>. They <em>might</em> care about what the Decent Bar does, but they shouldn't have to. Encapsulation is appropriate here.</p><p>Similarly, there are some scripts for deploying decent apps to the Decent Portal that handle staging, promotion, and rollbacks on our portal hosting. I might need to update these devops scripts in the future. In that situation, I shouldn't ask a dev to hand-edit source for updates that are tightly coupled to my specific hosting setup. Again, this should just be a simple package manager update.</p><p>The general principle I'll follow for CDA is that source should be vendored/in-lined unless:</p><ul><li>The functionality is Decent-Portal-specific.</li><li>The library is large or complex enough that most developers would prefer to not review or revise its implementation. (React, WebLLM)</li></ul><p>So I will make a new library called "Decent Portal Lib" and refactor the Decent-Portal-specific stuff over to it. And I'll be certain to make that library easily removable from decent apps so that devs can use CDA to make apps that aren't destined for the Decent Portal.</p><h1>Other 2.0 Changes Planned</h1><h2>No Wouter</h2><p>I decided most decent app developers won't need Wouter. It's a React/Preact routing library (<a href="https://github.com/molefrog/wouter" target="_blank" rel="noopener noreferrer">Github</a>) from Alexey Taktarov. I much prefer it to the more popular React Router. Unlike React Router, I never had a single "why is it doing this?" moment with Wouter. And it's small and low-dependency.</p><p>But the CDA-generated app only has two screens - loading and home. And the home screen can simply show the loading UI when loading is needed, cutting the CDA-generated app down to just one route with CDA 2.0. In other words, the app doesn't need "/" and "/loading" URLs in the browser address bar - it can just be "/".<br><br>Also, every time you create a route, it implies the user can deep-link to that URL and do something useful when they arrive. If an app developer hasn't created a redirect HTML page for a new route and written deep link handling, the new route immediately creates one or more bugs to fix. So it seems better to have a single route for the app in the generated code - basically forcing all users of the app to come through the "front door".</p><p>If a developer wants to depart from this single-route default, they can add their preferred routing library or implement their own routing. And I don't have to foist Wouter on them, despite it being a great little library.</p><p>I love simplicity and removing dependencies. Wouter will take an honorable exit from the project.</p><h2>Jest Replaced by Vitest (Probably) </h2><p>There was a period of some months where I couldn't get a clean build from CDA-generated apps. They'd spout vulnerability warnings from NPM, indirectly due to Jest. The vulns were coming from transitive dependencies, so it wasn't exactly Jest's fault.</p><figure class="post__image post__image--wide"><img loading="lazy" src="./media/posts/15/jestVulns.jpg" alt="terminal showing npm audit unhappiness" width="2292" height="742" sizes="(max-width: 1920px) 100vw, 1920px" srcset="./media/posts/15/responsive/jestVulns-xs.jpg 640w, ./media/posts/15/responsive/jestVulns-sm.jpg 768w, ./media/posts/15/responsive/jestVulns-md.jpg 1024w, ./media/posts/15/responsive/jestVulns-lg.jpg 1366w, ./media/posts/15/responsive/jestVulns-xl.jpg 1600w, ./media/posts/15/responsive/jestVulns-2xl.jpg 1920w"></figure><p>But I <em>really</em> didn't like those pesky build warnings, especially when privacy and security are defining principles of decent apps. If I've got all my deps updated to the latest versions, my build should run clean, dammit! Am I being ignorant here or holding an impossible standard? Yeah, maybe. I'm open to correction, and I never want to cast shade on a group of open source volunteers.<br><br>To be fair, today, April 5th, 2025, Jest builds clean with the rest of my project. It just took a long time for the different open source players involved to get the vulns resolved. This can be a symptom of a project having more transitive dependencies. The things a project can do to get external project issues fixed are limited and time-consuming. It's kind of like the fall of the Roman Empire - only so much management of far-flung barbarians is possible.</p><p>I've heard good things about Vitest. Runs faster. Less dependencies. Plus, CDA already uses Vite to build, which has given me a Golden Age of problem-free builds over the last year or so.</p><p>So I'll try replacing Jest with Vitest, and if it goes well, CDA 2.0 will move to it.</p><h2>Enough for 2.0</h2><p>My mind keeps racing to other fixes and features for CDA. I want to add subdomain persistent storage so that each app developer gets protection from cross-app tampering. And I'd like to copy the Docker image support and custom LLM stuff over from Hone. But... that can be 2.1 or 2.2 or something later.</p><p>My goal is keep an "MVP" mindset and get create-decent-app 2.0 shipped in April - not June.</p></div><footer class="content__footer"><div class="entry-wrapper"><p class="content__updated">This article was updated on April 5, 2025</p><div class="content__actions"><ul class="content__tag"><li><a href="./tags/blog/">Blog</a></li></ul></div><div class="content__bio bio"><div><h3 class="h4 bio__name"><a href="./authors/erik-hermansen/" rel="author">Erik Hermansen</a></h3></div></div></div><nav class="content__nav"><div class="wrapper"><div class="content__nav-inner"><div class="content__nav-prev"><a href="./open-source-joy-for-publii.html" class="content__nav-link" rel="prev"><figure class="content__nav-image"><img src="./media/posts/12/responsive/openSourceJoy-xs.jpg" class="lazyload" loading="lazy" alt="people building a wall together" height="640" width="640"></figure><div><span>Previous</span> Open Source Joy for Publii</div></a></div><div class="content__nav-next"><a href="./personal-web-widget-libraries-are-a-good-thing.html" class="content__nav-link" rel="next"><div><span>Next</span> Personal Web Widget Libraries are a Good Thing</div><figure class="content__nav-image"><img src="./media/posts/16/responsive/widgets-xs.jpg" class="lazyload" loading="lazy" alt="" height="1108" width="1108"></figure></a></div></div></div></nav></footer></article><div class="content__related related"><div class="wrapper"><h2 class="h4 related__title">You should also read:</h2><article class="feed__item feed__item--centered"><figure class="feed__image related__image"><img src="./media/posts/18/decentNewsLogo-2.jpg" srcset="./media/posts/18/responsive/decentNewsLogo-2-xs.jpg 640w, ./media/posts/18/responsive/decentNewsLogo-2-sm.jpg 768w, ./media/posts/18/responsive/decentNewsLogo-2-md.jpg 1024w" sizes="(min-width: 600px) calc(4.38vw + 143px), 87.86vw" loading="lazy" height="500" width="1500" alt=""></figure><div class="feed__content"><header><div class="feed__meta"><a href="./authors/erik-hermansen/" class="feed__author">Erik Hermansen</a> <time datetime="2025-05-04T14:18" class="feed__date">May 4, 2025</time></div><h3 class="feed__title"><a href="./decent-news-for-may.html">Decent News for May</a></h3></header><p>Create-Decent-App 2.0 Released We've released Create-Decent-App 2.0, which is a project source code generator for local-LLM-based web apps. I say "we", but "we" is "me" right now. The Royal We, perhaps. If you know how to write React-based web apps already, the tool will be&hellip;</p><a href="./decent-news-for-may.html" class="readmore feed__readmore">Continue reading...</a></div></article><article class="feed__item feed__item--centered"><figure class="feed__image related__image"><img src="./media/posts/17/cdaCharter.jpg" srcset="./media/posts/17/responsive/cdaCharter-xs.jpg 640w, ./media/posts/17/responsive/cdaCharter-sm.jpg 768w, ./media/posts/17/responsive/cdaCharter-md.jpg 1024w" sizes="(min-width: 600px) calc(4.38vw + 143px), 87.86vw" loading="lazy" height="641" width="1905" alt=""></figure><div class="feed__content"><header><div class="feed__meta"><a href="./authors/erik-hermansen/" class="feed__author">Erik Hermansen</a> <time datetime="2025-04-27T13:51" class="feed__date">April 27, 2025</time></div><h3 class="feed__title"><a href="./create-decent-app-20-released.html">Create Decent App 2.0 Released</a></h3></header><p>After a month of work, I've released Create Decent App 2.0. This is a tool that generates project source for a local-LLM-based web app. It can also be used to create apps intended for deployment on the Decent Portal. (quick-start guide for Create Decent App)&hellip;</p><a href="./create-decent-app-20-released.html" class="readmore feed__readmore">Continue reading...</a></div></article></div></div></main><footer class="footer footer--glued"><div class="wrapper"><nav class="footer__nav"><ul><li><a href="./privacy-policy.html" class="al" target="_self">privacy policy</a></li><li><a href="./contact-us.html" class="al" target="_self">contact us</a></li></ul></nav><div class="footer__copyright"><p>Copyright ©2023-2025 by the respective authors. All rights reserved.</p></div><button id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="./assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="./assets/js/scripts.min.js?v=ffcbea6c02c8178d10092962b235a5b0"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>