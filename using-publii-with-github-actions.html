<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Using Publii with Github Actions - Decent Apps</title><meta name="description" content="I wanted to use the excellent Publii software in the following way: There are so many other ways to synchronize Publii that are less work. So why choose this one? In my case, I had a set of trusted scripts for Github actions that were&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="./using-publii-with-github-actions.html"><link rel="shortcut icon" href="./media/website/decentLogo16.png" type="image/png"><link rel="preload" href="./assets/dynamic/fonts/instrumentsans/instrumentsans.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="./assets/dynamic/fonts/instrumentsans/instrumentsans-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="./assets/dynamic/fonts/jellee/jellee.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="./assets/css/style.css?v=dae9d45edfbd0d6454b7815fc9d71a2e"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"./using-publii-with-github-actions.html"},"headline":"Using Publii with Github Actions","datePublished":"2025-03-21T12:22-07:00","dateModified":"2025-03-21T13:09-07:00","image":{"@type":"ImageObject","url":"./media/website/decentLogo192.png","height":192,"width":192},"description":"I wanted to use the excellent Publii software in the following way: There are so many other ways to synchronize Publii that are less work. So why choose this one? In my case, I had a set of trusted scripts for Github actions that were&hellip;","author":{"@type":"Person","name":"Erik Hermansen","url":"./authors/erik-hermansen/"},"publisher":{"@type":"Organization","name":"Erik Hermansen","logo":{"@type":"ImageObject","url":"./media/website/decentLogo192.png","height":192,"width":192}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="page-template"><header class="top js-header" style="background-color:#a58c75"><a class="logo" href="./"><img src="./media/website/decentLogo192.png" alt="Decent Apps" width="192" height="192"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Decent Portal</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="./decent-portal-coming-soon.html" target="_self">General Information</a></li><li><a href="./hone-a-local-llm-spreadsheet-tool-built-on-decent.html" target="_self">Hone (a Decent app)</a></li></ul></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Developer Resources</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="./decent-portal-app-requirements.html" target="_self">Decent Portal App Requirements</a></li><li><a href="./create-decent-app-quick-start.html" target="_self">Create-Decent-App Quick Start</a></li><li><a href="https://github.com/erikh2000/create-decent-app" target="_blank">Create-Decent-App Github Repo</a></li><li><a href="https://discord.gg/kkp3x4X2Vb" target="_blank">Decent Apps Discord</a></li></ul></li><li><a href="./tags/blog/" target="_self">Blog</a></li><li><a href="./contact-us.html" target="_self">Contact Us</a></li></ul></nav></header><main class="page"><article class="content"><div class="hero hero--noimage"><header class="hero__content"><div class="wrapper"><h1>Using Publii with Github Actions</h1></div></header></div><div class="entry-wrapper content__entry"><p>I wanted to use the excellent <a href="https://getpublii.com/" target="_blank" rel="noopener noreferrer">Publii software</a> in the following way:</p><ol><li>Synchronize to a Github repository.</li><li>Use Github actions in the same repo to publish to a website when triggered by a `git push` from step 1.</li></ol><p>There are so many other ways to synchronize Publii that are less work. So why choose this one? In my case, I had a set of trusted scripts for Github actions that were unique to my deployment, and I wanted to reuse them. You might find for your situation it's easier to use one of the other synchronization options.</p><p>My advice is based on versions of Github and Publii from 2025.</p><h2>Setup Github Synchronization Steps</h2><p>1. Create a new repo on Github. <strong>Don't commit any files to the repo.</strong> Not even a readme.</p><p>2. Created a fine-grained personal access token on Github with access limited to the repo in step 1, Read access to metadata, Read and write access to contents, Read and write access to workflows. (settings shown below)</p><figure class="post__image"><img loading="lazy" src="./media/posts/11/patSettings.jpg" alt="PAT settings" width="2020" height="1494" sizes="(max-width: 1920px) 100vw, 1920px" srcset="./media/posts/11/responsive/patSettings-xs.jpg 640w, ./media/posts/11/responsive/patSettings-sm.jpg 768w, ./media/posts/11/responsive/patSettings-md.jpg 1024w, ./media/posts/11/responsive/patSettings-lg.jpg 1366w, ./media/posts/11/responsive/patSettings-xl.jpg 1600w, ./media/posts/11/responsive/patSettings-2xl.jpg 1920w"></figure><p>Note that write access to workflows is a bit dangerous. See "Security Considerations" below.</p><p>3. Copy the PAT to your clipboard.</p><p>4. Configure Publii to synchronize with your new Github repository in the "Server" section of Publii. You can configure the fields as you like, but configuration should include pasting the PAT into the "Password / Token" field.</p><p>5. Click the "Test" button. Make sure you see no problems.</p><p>6. Choose "Sync Your Website" and perform a sync. Make sure you see no problems.</p><h2>Adding Github Actions Steps</h2><p>You now have a working synchronization. Let's see if we can add Github actions without breaking it. You might think that you could just "git clone" the repo to a new working directory, add the files for Github actions, and push it to the repo. But that will cause Publii's synchronization to break, as it doesn't seem to fetch/pull from the remote before it attempts to push, yielding an error like:</p><pre class="notranslate">PushRejectedError: Push rejected because it was not a simple fast-forward. Use <span class="pl-s"><span class="pl-pds">"</span>force: true<span class="pl-pds">"</span></span> to override.</pre><p>So the solution is to get Publii to recognize some extra files for the Github actions as part of what it must synchronize.</p><p>1. In an IDE or text editor, add a file under `(app data path)/Publii/sites/(your site name)/input/root-files/.github/workflows/deploy.yml`, creating the new ".github/workflows" folders.</p><p>2. Edit the content of `deploy.yml` to be whatever you want it to be. You might create the equivalent of a "hello world" script here, and come back and refine it later. See other docs about Github actions for advice here.</p><p>3. Open the "Files" tool in Publii to check that the ".github" folder is present. In theory, you could add the files in using Publii, but I didn't find any options in the File tool for adding folders.</p><p>4. Make some token change to any other file, like a page, so that the next step will work.</p><p>5. Choose "Sync Your Website" and perform a sync.</p><p>6. Verify things are working on Github, e.g. the ".github" folder is present in your repo, and the action ran.</p><h2>Security Considerations</h2><p>A strength of Publii is that it just uploads static content, and there are fewer attack surfaces and opportunities for malware, exfiltration, etc. It's one of the reasons why I chose it over say... Wordpress.</p><p>But giving Publii permission to write Github action scripts does require more trust be given to this software. While I have no reason to think Publii, its contributors, or its downstream dependencies are malicious, it's good to keep things locked down.</p><p>So I recommend after your edits to the Github action scripts are completed, to simply remove the read and write access to workflows for the personal access token. The synchronization will continuing working, and you can reenable "workflows" permissions if you need to make changes to your Github action scripts.</p><figure class="post__image"><img loading="lazy" src="./media/posts/11/noWorkflowAcess.jpg" alt="" width="1940" height="182" sizes="(max-width: 1920px) 100vw, 1920px" srcset="./media/posts/11/responsive/noWorkflowAcess-xs.jpg 640w, ./media/posts/11/responsive/noWorkflowAcess-sm.jpg 768w, ./media/posts/11/responsive/noWorkflowAcess-md.jpg 1024w, ./media/posts/11/responsive/noWorkflowAcess-lg.jpg 1366w, ./media/posts/11/responsive/noWorkflowAcess-xl.jpg 1600w, ./media/posts/11/responsive/noWorkflowAcess-2xl.jpg 1920w"></figure><h2>Fixing a Broken Synchronization (PushRejectedError)</h2><p>If you, like me, tried pushing content to your repo outside of Publii, you might be seeing a message like this during website synchronization.</p><pre class="notranslate">PushRejectedError: Push rejected because it was not a simple fast-forward. Use <span class="pl-s"><span class="pl-pds">"</span>force: true<span class="pl-pds">"</span></span> to override.</pre><p>The easiest thing honestly might be to just create a new repo. Basically, start over from step 1 at the top of this doc.</p><p>If you're good with Git, then another option is to try to fix the working directory from the terminal. You will find it in `(app data path)/Publii/sites/(your site name)/output`. I fumbled through some commands and got it to work again, but I'm not great at Git, and don't feel confident in laying steps here that would universally work. Plus, it's hard to know what might mess up the Publii sync process.</p><p>So yeah, probably best to create a new repo rather than fix the working directory state.</p><h2>Permission Granted to Publii Project and Maintainers</h2><p>You may copy and adapt this text for use in your documentation however you like.</p></div></article></main><footer class="footer"><div class="wrapper"><nav class="footer__nav"><ul><li><a href="./privacy-policy.html" class="al" target="_self">privacy policy</a></li><li><a href="./contact-us.html" class="al" target="_self">contact us</a></li></ul></nav><div class="footer__copyright"><p>Copyright ©2023-2025 by the respective authors. All rights reserved.</p></div><button id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="./assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="./assets/js/scripts.min.js?v=ffcbea6c02c8178d10092962b235a5b0"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>